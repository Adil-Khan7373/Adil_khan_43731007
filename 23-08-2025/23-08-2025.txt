CREATE DATABASE CompanyDB;
USE CompanyDB;

CREATE TABLE Worker (
    WORKER_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    FIRST_NAME CHAR(25) NOT NULL,
    LAST_NAME CHAR(25) NOT NULL,
    SALARY INT NOT NULL,
    JOINING_DATE DATETIME,
    DEPARTMENT CHAR(25) NOT NULL,
    USERNAME CHAR(25) NOT NULL,
    AGE INT NOT NULL
);

INSERT INTO Worker 
(WORKER_ID, FIRST_NAME, LAST_NAME, SALARY, JOINING_DATE, DEPARTMENT, USERNAME, AGE) VALUES
(1, 'Monika', 'Arora', 100000, '2020-02-14 09:00:00', 'HR', 'MONI12', 27),
(2, 'Niharika', 'Verma', 80000, '2011-06-14 09:00:00', 'Admin', 'NIHA13', 22),
(3, 'Vishal', 'Singhal', 300000, '2020-02-14 09:00:00', 'HR', 'VISH16', 23);

UPDATE Worker SET USERNAME = 'NIKA22' WHERE WORKER_ID = 2;

ALTER TABLE Worker ADD CONSTRAINT uq_username UNIQUE (USERNAME);
ALTER TABLE Worker DROP INDEX uq_username;

ALTER TABLE Worker ADD CONSTRAINT chk_age CHECK (AGE > 20 AND AGE < 130);
ALTER TABLE Worker DROP CHECK chk_age;

ALTER TABLE Worker DROP PRIMARY KEY;
ALTER TABLE Worker ADD CONSTRAINT pk_worker PRIMARY KEY(WORKER_ID);

CREATE TABLE Department (
    DEPARTMENT_ID INT PRIMARY KEY,
    DEPARTMENT_NAME CHAR(25) NOT NULL,
    DEPARTMENT_MANAGER CHAR(50) NOT NULL
);

ALTER TABLE Worker ADD COLUMN DEPARTMENT_ID INT;
ALTER TABLE Worker 
    ADD CONSTRAINT fk_worker_dept FOREIGN KEY (DEPARTMENT_ID) REFERENCES Department(DEPARTMENT_ID);

INSERT INTO Department (DEPARTMENT_ID, DEPARTMENT_NAME, DEPARTMENT_MANAGER) VALUES
(1011, 'IT', 'Manohar'),
(1012, 'Finance', 'Keerthana');

UPDATE Worker SET DEPARTMENT_ID = 1011 WHERE WORKER_ID = 1;

SELECT * FROM Worker;
SELECT * FROM Department;
